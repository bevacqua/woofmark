!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).woofmark=e()}}((function(){return function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return o(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],2:[function(e,t,n){"use strict";var r=e("crossvent"),o=e("./throttle"),i=e("./tailormade");t.exports=function(e,t,n){var a=n,s=t&&t.tagName;s||2!==arguments.length||(a=t),s||(t=e),a||(a={});var c=!1,l=o(g,30),u={update:!1!==a.autoupdateToCaret&&m},f=a.caret&&i(t,u);return g(),!1!==a.tracking&&r.add(window,"resize",l),{read:p,refresh:g,destroy:v,sleep:d};function d(){u.sleeping=!0}function p(){return h()}function h(e){var n=t.getBoundingClientRect(),r=document.body.scrollTop||document.documentElement.scrollTop;return f?{x:((e=f.read()).absolute?0:n.left)+e.x,y:(e.absolute?0:n.top)+r+e.y+20}:{x:n.left,y:n.top+r}}function m(e){g(e)}function g(n){if(c)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(f&&!n)return u.sleeping=!1,void f.refresh();var r=h(n);f||t===e||(r.y+=t.offsetHeight),e.style.left=r.x+"px",e.style.top=r.y+"px"}function v(){f&&f.destroy(),r.remove(window,"resize",l),c=!0}}},{"./tailormade":3,"./throttle":4,crossvent:10}],3:[function(e,t,n){(function(n){"use strict";var r=e("sell"),o=e("crossvent"),i=e("seleccion"),a=e("./throttle"),s=i.get,c=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],l=n,u=document,f=null!==l.mozInnerScreenX&&void 0!==l.mozInnerScreenX;t.exports=function(e,t){var n="INPUT"===e.tagName||"TEXTAREA"===e.tagName,i=a((function(){if(d.sleeping)return;return(d.update||p)(h())}),30),d=t||{};return y(),{read:h,refresh:i,destroy:function(){y(!0)}};function p(){}function h(){return(n?m:g)()}function m(){var t=r(e),n=function(){var t=l.getComputedStyle?getComputedStyle(e):e.currentStyle,n=u.createElement("div"),r=n.style;u.body.appendChild(n),"INPUT"!==e.tagName&&(r.wordWrap="break-word");r.whiteSpace="pre-wrap",r.position="absolute",r.visibility="hidden",c.forEach((function(e){r[e]=t[e]})),f?(r.width=parseInt(t.width)-2+"px",e.scrollHeight>parseInt(t.height)&&(r.overflowY="scroll")):r.overflow="hidden";return{mirror:n,computed:t}}(),o=function(t,n){var r=u.createElement("span"),o=t.mirror,i=t.computed;w(o,v(e).substring(0,n)),"INPUT"===e.tagName&&(o.textContent=o.textContent.replace(/\s/g,"Â "));return w(r,v(e).substring(n)||"."),o.appendChild(r),{x:r.offsetLeft+parseInt(i.borderLeftWidth),y:r.offsetTop+parseInt(i.borderTopWidth)}}(n,t.start);return u.body.removeChild(n.mirror),o}function g(){var e=s();if(e.rangeCount){var t=e.getRangeAt(0);if("P"===t.startContainer.nodeName&&0===t.startOffset)return{x:t.startContainer.offsetLeft,y:t.startContainer.offsetTop,absolute:!0};if(t.getClientRects){var n=t.getClientRects();if(n.length>0)return{x:n[0].left,y:n[0].top,absolute:!0}}}return{x:0,y:0}}function v(e){return n?e.value:e.innerHTML}function w(e,t){n?e.textContent=t:e.innerHTML=t}function y(t){var n=t?"remove":"add";o[n](e,"keydown",i),o[n](e,"keyup",i),o[n](e,"input",i),o[n](e,"paste",i),o[n](e,"change",i)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":4,crossvent:10,seleccion:27,sell:29}],4:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r=-1/0;return function(){n||function o(){clearTimeout(n),n=null;var i=r+t,a=Date.now();a>i?(r=a,e()):n=setTimeout(o,i-a)}()}}},{}],5:[function(e,t,n){"use strict";var r=e("xhr"),o=e("crossvent"),i=e("contra/emitter"),a={image:function(e){return s.test(e.type)}},s=/^image\/(gif|png|p?jpe?g)$/i;function c(e){var t=e||{};t.formData=t.formData||{},t.fieldKey=t.fieldKey||"uploads";var n=i({submit:function(e){n.emit("started",e);var o=Array.prototype.slice.call(e),i=(s=o,t.validate?s.filter((function(e){return(a[t.validate]||t.validate)(e)})):s);var s;if(!i)return void n.emit("invalid",o);n.emit("valid",i);var c=new FormData;Object.keys(t.formData).forEach((function(e){c.append(e,t.formData[e])}));var l={"Content-Type":"multipart/form-data",headers:{Accept:"application/json"},method:t.method||"PUT",url:t.endpoint||"/api/files",body:c};i.forEach((function(e){c.append(t.fieldKey,e,e.name)})),r(l,(function(e,t,r){t.body=r=function(e){try{return JSON.parse(e)}catch(e){return e}}(r);var o=r&&r.results&&Array.isArray(r.results)?r.results:[];e||t.statusCode<200||t.statusCode>299||r instanceof Error?n.emit("error",e):n.emit("success",o,r),n.emit("ended",e,o,r)}))}});return n}t.exports={create:c,setup:function(e,t){var n=c(t);return o.add(e,"change",(function(t){(function(e){e.stopPropagation(),e.preventDefault()})(t),e.files.length&&n.submit(e.files);e.value="",e.value=null}),!1),n}}},{"contra/emitter":9,crossvent:6,xhr:33}],6:[function(e,t,n){(function(n){"use strict";var r=e("custom-event"),o=e("./eventmap"),i=n.document,a=function(e,t,n,r){return e.addEventListener(t,n,r)},s=function(e,t,n,r){return e.removeEventListener(t,n,r)},c=[];function l(e,t,n){var r=function(e,t,n){var r,o;for(r=0;r<c.length;r++)if((o=c[r]).element===e&&o.type===t&&o.fn===n)return r}(e,t,n);if(r){var o=c[r].wrapper;return c.splice(r,1),o}}n.addEventListener||(a=function(e,t,r){return e.attachEvent("on"+t,function(e,t,r){var o=l(e,t,r)||function(e,t,r){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}(e,0,r);return c.push({wrapper:o,element:e,type:t,fn:r}),o}(e,t,r))},s=function(e,t,n){var r=l(e,t,n);if(r)return e.detachEvent("on"+t,r)}),t.exports={add:a,remove:s,fabricate:function(e,t,n){var a=-1===o.indexOf(t)?new r(t,{detail:n}):function(){var e;i.createEvent?(e=i.createEvent("Event")).initEvent(t,!0,!0):i.createEventObject&&(e=i.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":12}],7:[function(e,t,n){(function(e){"use strict";var n=[],r="",o=/^on/;for(r in e)o.test(r)&&n.push(r.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){"use strict";var r=e("ticky");t.exports=function(e,t,n){e&&r((function(){e.apply(n||null,t||[])}))}},{ticky:30}],9:[function(e,t,n){"use strict";var r=e("atoa"),o=e("./debounce");t.exports=function(e,t){var n=t||{},i={};return void 0===e&&(e={}),e.on=function(t,n){return i[t]?i[t].push(n):i[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete i[t];else if(0===r)i={};else{var o=i[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(i[t]||[]).slice(0);return function(){var i=r(arguments),s=this||e;if("error"===t&&!1!==n.throws&&!a.length)throw 1===i.length?i[0]:i;return a.forEach((function(r){n.async?o(r,i,s):r.apply(s,i),r._once&&e.off(t,r)})),e}},e}},{"./debounce":8,atoa:1}],10:[function(e,t,n){(function(n){"use strict";var r=e("custom-event"),o=e("./eventmap"),i=document,a=function(e,t,n,r){return e.addEventListener(t,n,r)},s=function(e,t,n,r){return e.removeEventListener(t,n,r)},c=[];function l(e,t,n){var r=function(e,t,n){var r,o;for(r=0;r<c.length;r++)if((o=c[r]).element===e&&o.type===t&&o.fn===n)return r}(e,t,n);if(r){var o=c[r].wrapper;return c.splice(r,1),o}}n.addEventListener||(a=function(e,t,r){return e.attachEvent("on"+t,function(e,t,r){var o=l(e,t,r)||function(e,t,r){return function(t){var o=t||n.event;o.target=o.target||o.srcElement,o.preventDefault=o.preventDefault||function(){o.returnValue=!1},o.stopPropagation=o.stopPropagation||function(){o.cancelBubble=!0},o.which=o.which||o.keyCode,r.call(e,o)}}(e,0,r);return c.push({wrapper:o,element:e,type:t,fn:r}),o}(e,t,r))},s=function(e,t,n){return e.detachEvent("on"+t,l(e,t,n))}),t.exports={add:a,remove:s,fabricate:function(e,t,n){var a=-1===o.indexOf(t)?new r(t,{detail:n}):function(){var e;i.createEvent?(e=i.createEvent("Event")).initEvent(t,!0,!0):i.createEventObject&&(e=i.createEventObject());return e}();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":11,"custom-event":12}],11:[function(e,t,n){(function(e){"use strict";var n=[],r="",o=/^on/;for(r in e)o.test(r)&&n.push(r.slice(2));t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){(function(e){var n=e.CustomEvent;t.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){t.exports=function(e){if(!e)return!1;var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var r=Object.prototype.toString},{}],15:[function(e,t,n){"use strict";var r=e("sektor"),o=e("crossvent"),i=/\s+/g,a={13:"enter",27:"esc",32:"space"},s={};function c(e,t,n,r){void 0===r&&(r=n,n={});var o=n.context||"defaults";r&&(void 0===s[o]&&(s[o]={}),t.toLowerCase().split(i).forEach((function(t){var i=t.trim();if(0===i.length)return;e(s[o],i,n,r)})))}o.add(window,"keydown",(function(e){var t=function(e){return e.which||e.keyCode||e.charCode}(e),n=a[t]||String.fromCharCode(t);n&&function(e,t){var n,o=function(e,t){var n=[e];t.shiftKey&&n.unshift("shift");t.altKey&&n.unshift("alt");t.ctrlKey^t.metaKey&&n.unshift("cmd");return n.join("+").toLowerCase()}(e,t);for(n in s)s[n][o]&&s[n][o].forEach(i);function i(e){(function(e){var n=e.filter;if(n){var o=t.target;if("string"==typeof n)return!1===r.matchesSelector(o,n);for(;o.parentElement&&o!==n;)o=o.parentElement;return o!==n}})(e)||e.handle(t)}}(n,e)})),t.exports={on:function(e,t,n){c((function(e,t,n,r){var o={handle:r,filter:n.filter};e[t]?e[t].push(o):e[t]=[o]}),e,t,n)},off:function(e,t,n){c((function(e,t,n,r){e[t]&&(e[t]=e[t].filter((function(e){return e.handle===r&&e.filter===n.filter})))}),e,t,n)},clear:function(e){e?e in s&&(s[e]={}):s={}},handlers:s}},{crossvent:10,sektor:20}],16:[function(e,t,n){(function(n){"use strict";var r=e("./stub"),o=e("./tracking"),i="localStorage"in n&&n.localStorage?n.localStorage:r;function a(e,t){return 1===arguments.length?s(e):c(e,t)}function s(e){return JSON.parse(i.getItem(e))}function c(e,t){try{return i.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}a.set=c,a.get=s,a.remove=function(e){return i.removeItem(e)},a.clear=function(){return i.clear()},a.on=o.on,a.off=o.off,t.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./stub":17,"./tracking":18}],17:[function(e,t,n){"use strict";var r={};t.exports={getItem:function(e){return e in r?r[e]:null},setItem:function(e,t){return r[e]=t,!0},removeItem:function(e){return!!(e in r)&&delete r[e]},clear:function(){return r={},!0}}},{}],18:[function(e,t,n){(function(e){"use strict";var n={};function r(t){t||(t=e.event);var r=n[t.key];r&&r.forEach((function(e){e(JSON.parse(t.newValue),JSON.parse(t.oldValue),t.url||t.uri)}))}t.exports={on:function(t,o){n[t]?n[t].push(o):n[t]=[o],e.addEventListener?e.addEventListener("storage",r,!1):e.attachEvent?e.attachEvent("onstorage",r):e.onstorage=r},off:function(e,t){var r=n[e];r.length>1?r.splice(r.indexOf(t),1):n[e]=[]}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(e,t,n){var r=function(e){return e.replace(/^\s+|\s+$/g,"")};t.exports=function(e){if(!e)return{};for(var t,n={},o=r(e).split("\n"),i=0;i<o.length;i++){var a=o[i],s=a.indexOf(":"),c=r(a.slice(0,s)).toLowerCase(),l=r(a.slice(s+1));void 0===n[c]?n[c]=l:(t=n[c],"[object Array]"===Object.prototype.toString.call(t)?n[c].push(l):n[c]=[n[c],l])}return n}},{}],20:[function(e,t,n){(function(e){"use strict";var n="sektor-"+Date.now(),r=/[+~]/,o=e.document,i=o&&o.documentElement||{},a=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector||i.msMatchesSelector||function(){return!1};function s(e,t,i,a){var s,l=t||o,u=i||[],f=0;if("string"!=typeof e)return u;if(1!==l.nodeType&&9!==l.nodeType)return[];if(a)for(;s=a[f++];)c(s,e)&&u.push(s);else u.push.apply(u,function(e,t){var i,a,s,c,l;t!==o&&(c=(s="#"+(a=(i=t.getAttribute("id"))||n)+" ")+e.replace(/,/g,","+s),l=r.test(e)&&t.parentNode,i||t.setAttribute("id",a));try{return(l||t).querySelectorAll(c||e)}catch(e){return[]}finally{null===i&&t.removeAttribute("id")}}(e,l));return u}function c(e,t){return a.call(e,t)}t.exports=s,s.matches=function(e,t){return s(e,null,null,t)},s.matchesSelector=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){(function(n){"use strict";var r,o=n.document,i=e("./getSelectionRaw"),a=e("./getSelectionNullOp"),s=e("./getSelectionSynthetic");r=e("./isHost").method(n,"getSelection")?i:"object"==typeof o.selection&&o.selection?s:a,t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":22,"./getSelectionRaw":23,"./getSelectionSynthetic":24,"./isHost":25}],22:[function(e,t,n){"use strict";function r(){}t.exports=function(){return{removeAllRanges:r,addRange:r}}},{}],23:[function(e,t,n){(function(e){"use strict";t.exports=function(){return e.getSelection()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(n){"use strict";var r=e("./rangeToTextRange"),o=n.document,i=o.body,a=s.prototype;function s(e){var t=e.createRange();this._selection=e,this._ranges=[],"Control"===e.type?p(this):f(t)?d(this,t):l(this)}function c(e,t){e.anchorNode=t.startContainer,e.anchorOffset=t.startOffset,e.focusNode=t.endContainer,e.focusOffset=t.endOffset}function l(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function u(e){var t=e.getNodes();if(!function(e){if(!e.length||1!==e[0].nodeType)return!1;for(var t=1,n=e.length;t<n;++t)if(!h(e[0],e[t]))return!1;return!0}(t))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return t[0]}function f(e){return e&&void 0!==e.text}function d(e,t){e._ranges=[t],c(e,t),e.rangeCount=1,e.isCollapsed=t.collapsed}function p(e){if(e._ranges.length=0,"None"===e._selection.type)l(e);else{var t=e._selection.createRange();if(f(t))d(e,t);else{var n;e.rangeCount=t.length;for(var r=0;r<e.rangeCount;++r)(n=o.createRange()).selectNode(t.item(r)),e._ranges.push(n);e.isCollapsed=1===e.rangeCount&&e._ranges[0].collapsed,c(e,e._ranges[e.rangeCount-1])}}}function h(e,t){for(var n=t;n.parentNode;){if(n.parentNode===e)return!0;n=n.parentNode}return!1}a.removeAllRanges=function(){try{this._selection.empty(),"None"!==this._selection.type&&(i.createTextRange().select(),this._selection.empty())}catch(e){}l(this)},a.addRange=function(e){"Control"===this._selection.type?function(e,t){for(var n=e._selection.createRange(),r=u(t),o=i.createControlRange(),a=0,s=n.length;a<s;++a)o.add(n.item(a));try{o.add(r)}catch(e){throw new Error("addRange(): Element could not be added to control selection")}o.select(),p(e)}(this,e):(r(e).select(),this._ranges[0]=e,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,c(this,e))},a.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?function(e,t){for(var n,r=i.createControlRange(),o=0,a=t.length;o<a;++o){n=u(t[o]);try{r.add(n)}catch(e){throw new Error("setRanges(): Element could not be added to control selection")}}r.select(),p(e)}(this,e):t&&this.addRange(e[0])},a.getRangeAt=function(e){if(e<0||e>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[e].cloneRange()},a.removeRange=function(e){if("Control"===this._selection.type){for(var t=this._selection.createRange(),n=u(e),r=i.createControlRange(),o=!1,a=0,s=t.length;a<s;++a)t.item(a)!==n||o?r.add(t.item(a)):o=!0;r.select(),p(this)}else!function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,o=n.length;r<o;++r)i=t,a=n[r],(i.startContainer!==a.startContainer||i.startOffset!==a.startOffset||i.endContainer!==a.endContainer||i.endOffset!==a.endOffset)&&e.addRange(n[r]);var i,a;e.rangeCount||l(e)}(this,e)},a.eachRange=function(e,t){var n=0,r=this._ranges.length;for(n=0;n<r;++n)if(e(this.getRangeAt(n)))return t},a.getAllRanges=function(){var e=[];return this.eachRange((function(t){e.push(t)})),e},a.setSingleRange=function(e){this.removeAllRanges(),this.addRange(e)},t.exports=function(){return new s(n.document.selection)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":26}],25:[function(e,t,n){"use strict";function r(e,t){var n=typeof e[t];return"function"===n||!("object"!==n||!e[t])||"unknown"===n}function o(e,t){return void 0!==e[t]}function i(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}t.exports={method:r,methods:i(r),property:o,properties:i(o)}},{}],26:[function(e,t,n){(function(e){"use strict";var n=e.document,r=n.body;function o(e,t){var o,i,a,s,c,l,u=e.offset,f=r.createTextRange(),d=(c=e.node,3===(l=c.nodeType)||4===l||8===l);return d?i=(o=e.node).parentNode:(o=u<(s=e.node.childNodes).length?s[u]:null,i=e.node),(a=n.createElement("span")).innerHTML="&#feff;",o?i.insertBefore(a,o):i.appendChild(a),f.moveToElementText(a),f.collapse(!t),i.removeChild(a),d&&f[t?"moveStart":"moveEnd"]("character",u),f}t.exports=function(e){if(e.collapsed)return o({node:e.startContainer,offset:e.startOffset},!0);var t=o({node:e.startContainer,offset:e.startOffset},!0),n=o({node:e.endContainer,offset:e.endOffset},!1),i=r.createTextRange();return i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(e,t,n){"use strict";var r=e("./getSelection"),o=e("./setSelection");t.exports={get:r,set:o}},{"./getSelection":21,"./setSelection":28}],28:[function(e,t,n){(function(n){"use strict";var r=e("./getSelection"),o=e("./rangeToTextRange"),i=n.document;t.exports=function(e){i.createRange?function(){var t=r(),n=i.createRange();if(!e.startContainer)return;e.endContainer?n.setEnd(e.endContainer,e.endOffset):n.setEnd(e.startContainer,e.startOffset);n.setStart(e.startContainer,e.startOffset),t.removeAllRanges(),t.addRange(n)}():o(e).select()}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":21,"./rangeToTextRange":26}],29:[function(e,t,n){"use strict";var r=function(e){return{start:e.selectionStart,end:e.selectionEnd}},o=function(e,t){e.selectionStart=i(e,t.start),e.selectionEnd=i(e,t.end)};function i(e,t){return"end"===t?e.value.length:t||0}document.selection&&document.selection.createRange&&(r=function(e){var t=document.activeElement;t!==e&&e.focus();var n=document.selection.createRange(),r=n.getBookmark(),o=e.value,i=function(e){var t;do{t="@@marker."+Math.random()*new Date}while(-1!==e.indexOf(t));return t}(o),a=n.parentElement();if(null===a||!function(e){return"INPUT"===e.tagName&&"text"===e.type||"TEXTAREA"===e.tagName}(a))return c(0,0);n.text=i+n.text+i;var s=e.value;return e.value=o,n.moveToBookmark(r),n.select(),c(s.indexOf(i),s.lastIndexOf(i)-i.length);function c(n,r){return t!==e&&(t?t.focus():e.blur()),{start:n,end:r}}},o=function(e,t){var n=e.createTextRange();"end"===t.start&&"end"===t.end?(n.collapse(!1),n.select()):(n.collapse(!0),n.moveEnd("character",i(e,t.end)),n.moveStart("character",i(e,t.start)),n.select())}),t.exports=function(e,t){return 2===arguments.length&&o(e,t),r(e)}},{}],30:[function(e,t,n){(function(e){var n;n="function"==typeof e?function(t){e(t)}:function(e){setTimeout(e,0)},t.exports=n}).call(this,e("timers").setImmediate)},{timers:31}],31:[function(e,t,n){(function(t,r){var o=e("process/browser.js").nextTick,i=Function.prototype.apply,a=Array.prototype.slice,s={},c=0;function l(e,t){this._id=e,this._clearFn=t}n.setTimeout=function(){return new l(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new l(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(e){e.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},n.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},n._unrefActive=n.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n.setImmediate="function"==typeof t?t:function(e){var t=c++,r=!(arguments.length<2)&&a.call(arguments,1);return s[t]=!0,o((function(){s[t]&&(r?e.apply(null,r):e.call(null),n.clearImmediate(t))})),t},n.clearImmediate="function"==typeof r?r:function(e){delete s[e]}}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":32,timers:31}],32:[function(e,t,n){var r,o,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var l,u=[],f=!1,d=-1;function p(){f&&l&&(f=!1,l.length?u=l.concat(u):d=-1,u.length&&h())}function h(){if(!f){var e=c(p);f=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,f=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||f||c(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],33:[function(e,t,n){"use strict";var r=e("global/window"),o=e("is-function"),i=e("parse-headers"),a=e("xtend");function s(e,t,n){var r=e;return o(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=a(t,{uri:e}),r.callback=n,r}function c(e,t,n){return l(t=s(e,t,n))}function l(e){var t=e.callback;if(void 0===t)throw new Error("callback argument missing");function n(){var e=void 0;if(e=f.response?f.response:f.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=204===e.status&&e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(f),w)try{e=JSON.parse(e)}catch(e){}return e}var r={body:void 0,headers:{},statusCode:0,method:h,url:p,rawRequest:f};function o(e){clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,t(e,r),t=u}function a(){if(!l){var o;clearTimeout(d),o=e.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var a=r,s=null;0!==o?(a={body:n(),statusCode:o,method:h,headers:{},url:p,rawRequest:f},f.getAllResponseHeaders&&(a.headers=i(f.getAllResponseHeaders()))):s=new Error("Internal XMLHttpRequest Error"),t(s,a,a.body),t=u}}var s,l,f=e.xhr||null;f||(f=e.cors||e.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var d,p=f.url=e.uri||e.url,h=f.method=e.method||"GET",m=e.body||e.data||null,g=f.headers=e.headers||{},v=!!e.sync,w=!1;if("json"in e&&(w=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),m=JSON.stringify(e.json))),f.onreadystatechange=function(){4===f.readyState&&a()},f.onload=a,f.onerror=o,f.onprogress=function(){},f.ontimeout=o,f.open(h,p,!v,e.username,e.password),v||(f.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(d=setTimeout((function(){l=!0,f.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}),e.timeout)),f.setRequestHeader)for(s in g)g.hasOwnProperty(s)&&f.setRequestHeader(s,g[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(m),f}function u(){}t.exports=c,c.XMLHttpRequest=r.XMLHttpRequest||u,c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){c["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),l(n)}}))},{"global/window":13,"is-function":14,"parse-headers":19,xtend:34}],34:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)r.call(n,o)&&(e[o]=n[o])}return e};var r=Object.prototype.hasOwnProperty},{}],35:[function(e,t,n){"use strict";var r=e("crossvent"),o=e("./InputState");function i(e,t){var n=this;function o(e){var t=u(c);r.add(e,"keypress",l),r.add(e,"keydown",u(a)),r.add(e,"keydown",u(s)),r.add(e,"mousedown",i),e.onpaste=t,e.ondrop=t}function i(){n.setMode("moving")}function u(e){return function(t){return e.call(null,n,t)}}n.inputMode=t,n.surface=e,n.reset(),o(e.textarea),o(e.editable)}function a(e,t){var n=!1,r=t.charCode||t.keyCode,o=String.fromCharCode(r);if(t.ctrlKey||t.metaKey)switch(o.toLowerCase()){case"y":e.redo(),n=!0;break;case"z":t.shiftKey?e.redo():e.undo(),n=!0}n&&t.preventDefault&&t.preventDefault()}function s(e,t){if(!t.ctrlKey&&!t.metaKey){var n=t.keyCode;n>=33&&n<=40||n>=63232&&n<=63235?e.setMode("moving"):8===n||46===n||127===n?e.setMode("deleting"):13===n?e.setMode("newlines"):27===n?e.setMode("escape"):(n<16||n>20)&&91!==n&&e.setMode("typing")}}function c(e){e.inputState&&e.inputState.text!==e.surface.read(e.inputMode)&&null===e.refreshing&&(e.historyMode="paste",e.saveState(),e.refreshState())}function l(e){var t=e.charCode||e.keyCode,n=89===t||90===t;(e.ctrlKey||e.metaKey)&&n&&e.preventDefault()}i.prototype.setInputMode=function(e){this.inputMode=e,this.reset()},i.prototype.reset=function(){return this.inputState=null,this.lastState=null,this.history=[],this.historyPointer=0,this.historyMode="none",this.refreshing=null,this.refreshState(!0),this.saveState(),this},i.prototype.setCommandMode=function(){var e=this;e.historyMode="command",e.saveState(),e.refreshing=setTimeout((function(){e.refreshState()}),0)},i.prototype.canUndo=function(){return this.historyPointer>1},i.prototype.canRedo=function(){return this.history[this.historyPointer+1]},i.prototype.undo=function(){this.canUndo()&&(this.lastState?(this.lastState.restore(),this.lastState=null):(this.history[this.historyPointer]=new o(this.surface,this.inputMode),this.history[--this.historyPointer].restore())),this.historyMode="none",this.surface.focus(this.inputMode),this.refreshState()},i.prototype.redo=function(){this.canRedo()&&this.history[++this.historyPointer].restore(),this.historyMode="none",this.surface.focus(this.inputMode),this.refreshState()},i.prototype.setMode=function(e){var t=this;t.historyMode!==e&&(t.historyMode=e,t.saveState()),t.refreshing=setTimeout((function(){t.refreshState()}),1)},i.prototype.refreshState=function(e){this.inputState=new o(this.surface,this.inputMode,e),this.refreshing=null},i.prototype.saveState=function(){var e=this.inputState||new o(this.surface,this.inputMode);"moving"!==this.historyMode?(this.lastState&&(this.history[this.historyPointer-1].text!==this.lastState.text&&(this.history[this.historyPointer++]=this.lastState),this.lastState=null),this.history[this.historyPointer++]=e,this.history[this.historyPointer+1]=null):this.lastState||(this.lastState=e)},t.exports=i},{"./InputState":36,crossvent:10}],36:[function(e,t,n){(function(n){"use strict";var r=n.document,o=e("./isVisibleElement"),i=e("./fixEOL"),a=e("./markdown/MarkdownChunks"),s=e("./html/HtmlChunks"),c={markdown:a,html:s,wysiwyg:s};function l(e,t,n){this.mode=t,this.surface=e,this.initialState=n||!1,this.init()}l.prototype.init=function(){var e=this.surface.current(this.mode);o(e)&&(!this.initialState&&r.activeElement&&r.activeElement!==e||(this.surface.readSelection(this),this.scrollTop=e.scrollTop,this.text||(this.text=this.surface.read(this.mode))))},l.prototype.select=function(){var e=this.surface.current(this.mode);o(e)&&this.surface.writeSelection(this)},l.prototype.restore=function(){var e=this.surface.current(this.mode);"string"==typeof this.text&&this.text!==this.surface.read(this.mode)&&this.surface.write(this.mode,this.text),this.select(),e.scrollTop=this.scrollTop},l.prototype.getChunks=function(){var e=new c[this.mode];return e.before=i(this.text.substring(0,this.start)),e.startTag="",e.selection=i(this.text.substring(this.start,this.end)),e.endTag="",e.after=i(this.text.substring(this.end)),e.scrollTop=this.scrollTop,this.cachedChunks=e,e},l.prototype.setChunks=function(e){e.before=e.before+e.startTag,e.after=e.endTag+e.after,this.start=e.before.length,this.end=e.before.length+e.selection.length,this.text=e.before+e.selection+e.after,this.scrollTop=e.scrollTop},t.exports=l}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./fixEOL":43,"./html/HtmlChunks":47,"./isVisibleElement":56,"./markdown/MarkdownChunks":58}],37:[function(e,t,n){"use strict";var r=e("crossvent"),o={markdown:{boldOrItalic:e("./markdown/boldOrItalic"),linkOrImageOrAttachment:e("./markdown/linkOrImageOrAttachment"),blockquote:e("./markdown/blockquote"),codeblock:e("./markdown/codeblock"),heading:e("./markdown/heading"),list:e("./markdown/list"),hr:e("./markdown/hr")},html:{boldOrItalic:e("./html/boldOrItalic"),linkOrImageOrAttachment:e("./html/linkOrImageOrAttachment"),blockquote:e("./html/blockquote"),codeblock:e("./html/codeblock"),heading:e("./html/heading"),list:e("./html/list"),hr:e("./html/hr")}};o.wysiwyg=o.html,t.exports=function(e,t,n){function i(e){return function(){r.fabricate(e,"click")}}function a(r,i){return function(a,s){o[a].linkOrImageOrAttachment.call(this,s,{editor:n,mode:a,type:r,surface:e,prompts:t.prompts,upload:t[r+"s"],classes:t.classes,mergeHtmlAndAttachment:t.mergeHtmlAndAttachment||c,autoUpload:i})}}function s(e,t,r){return n.addCommandButton(e,t,function(e){return function(t,n,r){!function(e){e.preventDefault(),e.stopPropagation()}(t),e.call(this,n,r)}}(r))}function c(e,t){var n=e.selection||t.title;return{before:e.before,selection:'<a href="'+t.href+'">'+n+"</a>",after:e.after}}function l(e){return function(t,n){o[t][e].call(this,n)}}s("bold","cmd+b",(function(e,t){o[e].boldOrItalic(t,"bold")})),s("italic","cmd+i",(function(e,t){o[e].boldOrItalic(t,"italic")})),s("quote","cmd+j",l("blockquote")),s("code","cmd+e",(function(e,n){o[e].codeblock(n,{fencing:t.fencing})})),s("ol","cmd+o",(function(e,t){o[e].list(t,!0)})),s("ul","cmd+u",(function(e,t){o[e].list(t,!1)})),s("heading","cmd+d",l("heading")),n.showLinkDialog=i(s("link","cmd+k",a("link"))),n.showImageDialog=i(s("image","cmd+g",a("image"))),n.linkOrImageOrAttachment=a,t.attachments&&(n.showAttachmentDialog=i(s("attachment","cmd+shift+k",a("attachment")))),t.hr&&s("hr","cmd+n",l("hr"))}},{"./html/blockquote":48,"./html/boldOrItalic":49,"./html/codeblock":50,"./html/heading":51,"./html/hr":52,"./html/linkOrImageOrAttachment":53,"./html/list":54,"./markdown/blockquote":59,"./markdown/boldOrItalic":60,"./markdown/codeblock":61,"./markdown/heading":62,"./markdown/hr":63,"./markdown/linkOrImageOrAttachment":64,"./markdown/list":65,crossvent:10}],38:[function(e,t,n){"use strict";t.exports=function(e){var t,n=[],r=e.length;for(t=0;t<r;t++)n.push(e[t]);return n}},{}],39:[function(e,t,n){"use strict";var r=/^\s*(.*?)(?:\s+"(.+)")?\s*$/,o=/^(?:https?|ftp):\/\//;function i(e){return e.replace(/\+/g," ")}function a(e){return e.replace(/\+/g,"%2b")}function s(e){return e?e.replace(/^\s+|\s+$/g,"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):null}function c(e){var t=e.replace(/^\s+|\s+$/g,"");return t.length&&"/"!==t[0]&&!o.test(t)?"http://"+t:t}t.exports=function(e){return function(e,t,n){var r=t.replace(/\?.*$/,i);return r=decodeURIComponent(r),{href:c(r=(r=encodeURI(r).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")).replace(/\?.*$/,a)),title:s(n)}}.apply(null,e.match(r))}},{}],40:[function(e,t,n){"use strict";t.exports=function(e){var t=this,n=function(e){return t.before+=e,""},r=function(e){return t.after=e+t.after,""};e&&(n=r=""),t.selection=t.selection.replace(/^(\s*)/,n).replace(/(\s*)$/,r)}},{}],41:[function(e,t,n){"use strict";var r=/^\s+|\s+$/g,o=/\s+/g;t.exports={add:function(e,t){var n=e.className;-1===n.indexOf(t)&&(e.className=(n+" "+t).replace(r,""))},rm:function(e,t){e.className=e.className.replace(t,"").replace(r,"").replace(o," ")}}},{}],42:[function(e,t,n){"use strict";t.exports=function(e,t,n){var r,o=e.toString();return o=t+(o=(o=o.replace(/\/([gim]*)$/,(function(e,t){return r=t,""}))).replace(/(^\/|\/$)/g,""))+n,new RegExp(o,r)}},{}],43:[function(e,t,n){"use strict";t.exports=function(e){return e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")}},{}],44:[function(e,t,n){"use strict";var r=e("./InputState");t.exports=function(e,t,n){return function(o){e.focus(t.inputMode),t.setCommandMode();var i=new r(e,t.inputMode),a=i.getChunks(),s={async:function(){return s.immediate=!1,c},immediate:!0};function c(){e.focus(t.inputMode),i.setChunks(a),i.restore()}n.call(s,o,t.inputMode,a),s.immediate&&c()}}},{"./InputState":36}],45:[function(e,t,n){(function(n){"use strict";var r=n.document,o=e("seleccion"),i=e("./fixEOL"),a=e("./many"),s=e("./cast"),c=o.get,l=o.set,u=/^(<[^>]+(?: [^>]*)?>)/,f=/(<\/[^>]+>)$/;t.exports=function(e,t,n){return{textarea:e,editable:t,droparea:n,focus:function(e){o(e).focus()},read:function(n){if("wysiwyg"===n)return t.innerHTML;return e.value},write:function(n,r){"wysiwyg"===n?t.innerHTML=r:e.value=r},current:o,writeSelection:function(n){"wysiwyg"===n.mode?function(e){var n=e.cachedChunks||e.getChunks(),r=n.before.length,o=r+n.selection.length,i={};d(t.firstChild,(function(e,t){var n=e.text.length,a=p(t).length,s=n+a;function c(e){return Math.max(0,Math.min(a,e))}!i.startContainer&&s>=r&&(i.startContainer=t,i.startOffset=c(r-n)),!i.endContainer&&s>=o&&(i.endContainer=t,i.endOffset=c(o-n))})),t.focus(),l(i)}(n):function(t){var n;if(void 0!==e.selectionStart)e.focus(),e.selectionStart=t.start,e.selectionEnd=t.end,e.scrollTop=t.scrollTop;else if(r.selection){if(r.activeElement&&r.activeElement!==e)return;e.focus(),(n=e.createTextRange()).moveStart("character",-e.value.length),n.moveEnd("character",-e.value.length),n.moveEnd("character",t.end),n.moveStart("character",t.start),n.select()}}(n)},readSelection:function(n){"wysiwyg"===n.mode?function(e){var n=c(),r=d(t.firstChild,(function(e,t){t===n.anchorNode&&(e.start=e.text.length+n.anchorOffset);t===n.focusNode&&(e.end=e.text.length+n.focusOffset)})),o=r.start||0,i=r.end||0;e.text=r.text,i>o?(e.start=o,e.end=i):(e.start=i,e.end=o)}(n):function(t){void 0!==e.selectionStart?(t.start=e.selectionStart,t.end=e.selectionEnd):r.selection&&function(t){if(r.activeElement&&r.activeElement!==e)return;t.text=i(e.value);var n=r.selection.createRange(),o=i(n.text),s=""+o+"";n.text=s;var c=i(e.value);n.moveStart("character",-s.length),n.text=o,t.start=c.indexOf(""),t.end=c.lastIndexOf("")-"".length;var l=t.text.length-i(e.value).length;l&&(n.moveStart("character",-o.length),o+=a("\n",l),t.end+=l,n.text=o);t.select()}(t)}(n)}};function o(n){return"wysiwyg"===n?t:e}function d(e,t,n,r){var o=n||{text:""};if(!e)return o;var i=1===e.nodeType,a=3===e.nodeType;return t(o,e),a&&(o.text+=p(e)),i&&(e.outerHTML.match(u)&&(o.text+=RegExp.$1),s(e.childNodes).forEach((function(e){d(e,t,o,!1)})),e.outerHTML.match(f)&&(o.text+=RegExp.$1)),!1!==r&&e.nextSibling?d(e.nextSibling,t,o):o}function p(e){return 3===e.nodeType?i(e.textContent||e.innerText||""):""}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cast":38,"./fixEOL":43,"./many":57,seleccion:27}],46:[function(e,t,n){"use strict";t.exports=function(e){return e.innerText||e.textContent}},{}],47:[function(e,t,n){"use strict";var r=e("../chunks/trim");function o(){}o.prototype.trim=r,o.prototype.findTags=function(){},o.prototype.skip=function(){},t.exports=o},{"../chunks/trim":40}],48:[function(e,t,n){"use strict";var r=e("../strings"),o=e("./wrapping");t.exports=function(e){o("blockquote",r.placeholders.quote,e)}},{"../strings":75,"./wrapping":55}],49:[function(e,t,n){"use strict";var r=e("../strings"),o=e("./wrapping");t.exports=function(e,t){o("bold"===t?"strong":"em",r.placeholders[t],e)}},{"../strings":75,"./wrapping":55}],50:[function(e,t,n){"use strict";var r=e("../strings"),o=e("./wrapping");t.exports=function(e){o("pre><code",r.placeholders.code,e)}},{"../strings":75,"./wrapping":55}],51:[function(e,t,n){"use strict";var r=e("../strings"),o=/<h([1-6])( [^>]*)?>$/,i=/^<\/h([1-6])>/;t.exports=function(e){e.trim();var t,n,a=i.exec(e.after),s=o.exec(e.before);s&&a&&s[1]===a[1]?(t=parseInt(s[1],10),n=t>3?(e.before=e.before.replace(o,""),void(e.after=e.after.replace(i,""))):t+1,e.before=e.before.replace(o,"<h"+n+">"),e.after=e.after.replace(i,"</h"+n+">")):function(){e.selection||(e.selection=r.placeholders.heading);e.before+="<h1>",e.after="</h1>"+e.after}()}},{"../strings":75}],52:[function(e,t,n){"use strict";t.exports=function(e){e.before+="\n<hr>\n",e.selection=""}},{}],53:[function(e,t,n){"use strict";var r=e("crossvent"),o=e("../once"),i=e("../strings"),a=e("../chunks/parseLinkInput"),s=/<a( [^>]*)?>$/,c=/^<\/a>/,l=/<img( [^>]*)?\/>$/;t.exports=function(e,t){var n,u=t.type,f="image"===u;"attachment"!==u&&e.trim(),function(){if(f){if(l.test(e.selection))return e.selection="",!0}else if(c.exec(e.after)&&s.exec(e.before))return e.before=e.before.replace(s,""),e.after=e.after.replace(c,""),!0}()||(n=this.async(),t.prompts.close(),(t.prompts[u]||t.prompts.link)(t,o((function(o){var s,c=o.definitions.map(a).filter((function(e){return e.href.length>0}));if(0===c.length)return void n();var l=c[0];if("attachment"===u)return s=t.mergeHtmlAndAttachment(e,l),e.before=s.before,e.selection=s.selection,e.after=s.after,n(),void r.fabricate(t.surface.textarea,"woofmark-mode-change");f?function(t,n){var r=e.after;e.before+=o(t),e.after=i(t),n.length&&(e.after+=n.map((function(e){return" "+o(e)+i(e)})).join(""));function o(e){return'<img src="'+e.href+'" alt="'}function i(e){return'"'+d(e)+" />"}e.after+=r}(l,c.slice(1)):function(n,r){var o=e.after,i=t.classes.input.links,a=i?' class="'+i+'"':"";e.before+=s(n),e.after="</a>",r.length&&(e.after+=r.map((function(e){return" "+s(e)+"</a>"})).join(""));function s(e){return'<a href="'+e.href+'"'+d(e)+a+">"}e.after+=o}(l,c.slice(1));e.selection||(e.selection=i.placeholders[u]);function d(e){return e.title?' title="'+e.title+'"':""}n()}))))}},{"../chunks/parseLinkInput":39,"../once":68,"../strings":75,crossvent:10}],54:[function(e,t,n){"use strict";var r=e("../strings"),o=/<(ul|ol)( [^>]*)?>\s*<li( [^>]*)?>$/,i=/^<\/li>\s*<\/(ul|ol)>/,a=/<li( [^>]*)?>$/,s=/^<\/li( [^>]*)?>/,c=/^<(ul|ol)( [^>]*)?>$/;t.exports=function(e,t){var n=t?"ol":"ul",l="<"+n+">",u="</"+n+">";if(e.trim(),o.test(e.before)&&i.test(e.after)&&n===RegExp.$1)return e.before=e.before.replace(o,""),void(e.after=e.after.replace(i,""));var f=e.before.lastIndexOf("<ul"),d=e.before.lastIndexOf("<ol"),p=e.after.indexOf("</ul>");if(-1===p&&(p=e.after.indexOf("</ol>")),-1!==p){var h=f>d?f:d;if(-1!==h){var m=e.before.indexOf(">",h);if(-1!==m){var g=e.before.substr(h,m-h+1);c.test(g)&&(n!==RegExp.$1?(e.before=e.before.substr(0,h)+"<"+n+e.before.substr(h+3),e.after=e.after.substr(0,p)+"</"+n+e.after.substr(p+4)):a.test(e.before)&&s.test(e.after)?(e.before=e.before.replace(a,""),e.after=e.after.replace(s,"")):v(!0))}else v()}else v()}else v();function v(t){var n=t?"":l,o=t?"":u;e.before+=n+"<li>",e.after="</li>"+o+e.after,e.selection||(e.selection=r.placeholders.listitem)}}},{"../strings":75}],55:[function(e,t,n){"use strict";function r(e,t){var n=new RegExp("<"+t+"(?: [^>]*)?>","ig"),r=new RegExp("</"+t.replace(/</g,"</")+">","ig"),o=c(e.before,n),i=c(e.after,n),a=c(e.before,r),s=c(e.after,r);return o-a>0&&s-i>0;function c(e,t){var n=e.match(t);return n?n.length:0}}t.exports=function(e,t,n){var o="<"+e,i="</"+e.replace(/</g,"</"),a=new RegExp(o+"( [^>]*)?>$","i"),s=new RegExp("^"+i+">","i"),c=new RegExp(o+"( [^>]*)?>","ig"),l=new RegExp(i+"( [^>]*)?>","ig");n.trim();var u=s.exec(n.after);if(a.exec(n.before)&&u)n.before=n.before.replace(a,""),n.after=n.after.replace(s,"");else{n.selection||(n.selection=t);var f=c.test(n.selection);f&&(n.selection=n.selection.replace(c,""),r(n,e)||(n.before+=o+">"));var d=l.test(n.selection);if(d&&(n.selection=n.selection.replace(l,""),r(n,e)||(n.after=i+">"+n.after)),f||d)return void p();r(n,e)?(a.test(n.before)?n.before=n.before.replace(a,""):n.before+=i+">",s.test(n.after)?n.after=n.after.replace(s,""):n.after=o+">"+n.after):function(e,t){var n=new RegExp("</"+t.replace(/</g,"</")+">$","i"),r=new RegExp("^<"+t+"(?: [^>]*)?>","i"),o=n.test(e.before)&&r.test(e.after);o&&(e.before=e.before.replace(n,""),e.after=e.after.replace(r,""));return o}(n,e)||(n.after=i+">"+n.after,n.before+=o+">"),p()}function p(){n.selection.replace(/<(\/)?([^> ]+)( [^>]*)?>/gi,h)}function h(e,t,r,o,i){var a=o||"",s=!t,c=new RegExp("</"+r.replace(/</g,"</")+">","i"),l=new RegExp("<"+r+"( [^>]*)?>","i");s&&!c.test(n.selection.substr(i))&&(n.selection+="</"+r+">",n.after=n.after.replace(/^(<\/[^>]+>)/,"$1<"+r+a+">")),t&&!l.test(n.selection.substr(0,i))&&(n.selection="<"+r+a+">"+n.selection,n.before=n.before.replace(/(<[^>]+(?: [^>]*)?>)$/,"</"+r+">$1"))}}},{}],56:[function(e,t,n){(function(e){"use strict";t.exports=function(t){return e.getComputedStyle?"none"!==e.getComputedStyle(t,null).getPropertyValue("display"):t.currentStyle?"none"!==t.currentStyle.display:void 0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,n){"use strict";t.exports=function(e,t){return new Array(t+1).join(e)}},{}],58:[function(e,t,n){"use strict";var r=e("../many"),o=e("../extendRegExp"),i=e("../chunks/trim");function a(){}a.prototype.trim=i,a.prototype.findTags=function(e,t){var n,r=this;function i(e){return r.startTag=r.startTag+e,""}function a(e){return r.endTag=e+r.endTag,""}e&&(n=o(e,"","$"),this.before=this.before.replace(n,i),n=o(e,"^",""),this.selection=this.selection.replace(n,i)),t&&(n=o(t,"","$"),this.selection=this.selection.replace(n,a),n=o(t,"^",""),this.after=this.after.replace(n,a))},a.prototype.skip=function(e){var t=e||{},n="before"in t?t.before:1,o="after"in t?t.after:1;function i(e,n,o){var i=t.any?"\\n*":r("\\n?",n),a=r("\n",n);return e.replace(new RegExp(i+o),a)}this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+RegExp.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+RegExp.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+RegExp.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+RegExp.$1,this.before&&(this.before=i(this.before,++n,"$")),this.after&&(this.after=i(this.after,++o,""))},t.exports=a},{"../chunks/trim":40,"../extendRegExp":42,"../many":57}],59:[function(e,t,n){"use strict";var r=e("../strings"),o=e("./wrapping"),i=e("./settings"),a=/(>[ \t]*)$/,s=/^(>[ \t]*)/,c=/^(\n*)([^\r]+?)(\n*)$/,l=/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,u=/^\n((>|\s)*)\n/,f=/\n((>|\s)*)\n$/;t.exports=function(e){var t,n="",d="";function p(t){var n=t?"> ":"";function r(e,t){return"\n"+t.replace(/^[ ]{0,3}>?[ \t]*$/gm,n)+"\n"}e.startTag&&(e.startTag=e.startTag.replace(f,r)),e.endTag&&(e.endTag=e.endTag.replace(u,r))}e.selection=e.selection.replace(c,(function(t,n,r,o){return e.before+=n,e.after=o+e.after,r})),e.before=e.before.replace(a,(function(t,n){return e.selection=n+e.selection,""})),e.selection=e.selection.replace(/^(\s|>)+$/,""),e.selection=e.selection||r.placeholders.quote,e.before&&function(){for(var r,o=e.before.replace(/\n$/,"").split("\n"),i=!1,a=0;a<o.length;a++)r=!1,t=o[a],i=i&&t.length>0,/^>/.test(t)?(r=!0,!i&&t.length>1&&(i=!0)):r=!!/^[ \t]*$/.test(t)||i,r?n+=t+"\n":(d+=n+t,n="\n");/(^|\n)>/.test(n)||(d+=n,n="")}(),e.startTag=n,e.before=d,e.after&&(e.after=e.after.replace(/^\n?/,"\n")),e.after=e.after.replace(l,(function(t){return e.endTag=t,""})),/^(?![ ]{0,3}>)/m.test(e.selection)?(o.wrap(e,i.lineLength-2),e.selection=e.selection.replace(/^/gm,"> "),p(!0),e.skip()):(e.selection=e.selection.replace(/^[ ]{0,3}> ?/gm,""),o.unwrap(e),p(!1),!/^(\n|^)[ ]{0,3}>/.test(e.selection)&&e.startTag&&(e.startTag=e.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(e.selection)&&e.endTag&&(e.endTag=e.endTag.replace(/^\n{0,2}/,"\n\n"))),/\n/.test(e.selection)||(e.selection=e.selection.replace(s,(function(t,n){return e.startTag+=n,""})))}},{"../strings":75,"./settings":66,"./wrapping":67}],60:[function(e,t,n){"use strict";var r=/^(\**)/,o=/(\**$)/,i=/(\s?)$/,a=e("../strings");t.exports=function(e,t){var n,s="bold"===t?2:1;e.trim(),e.selection=e.selection.replace(/\n{2,}/g,"\n");var c=o.exec(e.before)[0],l=r.exec(e.after)[0],u="\\*{"+s+"}",f=Math.min(c.length,l.length);f>=s&&(2!==f||1!==s)?(e.before=e.before.replace(new RegExp(u+"$",""),""),e.after=e.after.replace(new RegExp("^"+u,""),"")):!e.selection&&l?(e.after=e.after.replace(r,""),e.before=e.before.replace(i,"")+l+RegExp.$1):(e.selection||l||(e.selection=a.placeholders[t]),n=1===s?"*":"**",e.before=e.before+n,e.after=n+e.after)}},{"../strings":75}],61:[function(e,t,n){"use strict";var r=e("../strings"),o=/\S[ ]*$/,i=/^[ ]*\S/,a=/\n/,s=/`/,c=/```[a-z]*\n?$/,l=/^```[a-z]*\n/,u=/^\n?```/,f=/\n```$/;t.exports=function(e,t){var n=a.test(e.selection),d=i.test(e.after),p=o.test(e.before),h=c.test(e.before)&&u.test(e.after);h||n||!p&&!d?function(o){if(o)return e.before=e.before.replace(c,""),void(e.after=e.after.replace(u,""));e.before=e.before.replace(/[ ]{4}|```[a-z]*\n$/,(function(t){return e.selection=t+e.selection,""})),e.skip({before:/(\n|^)(\t|[ ]{4,}|```[a-z]*\n).*\n$/.test(e.before)?0:1,after:/^\n(\t|[ ]{4,}|\n```)/.test(e.after)?0:1}),e.selection?l.test(e.selection)&&f.test(e.selection)?e.selection=e.selection.replace(/(^```[a-z]*\n)|(```$)/g,""):/^[ ]{0,3}\S/m.test(e.selection)?t.fencing?(e.before+="```\n",e.after="\n```"+e.after):n?e.selection=e.selection.replace(/^/gm,"    "):e.before+="    ":e.selection=e.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t|```[a-z]*)/gm,""):(t.fencing?(e.startTag="```\n",e.endTag="\n```"):e.startTag="    ",e.selection=r.placeholders.code)}(h):(e.trim(),e.findTags(s,s),e.startTag||e.endTag?e.endTag&&!e.startTag?(e.before+=e.endTag,e.endTag=""):e.startTag=e.endTag="":(e.startTag=e.endTag="`",e.selection||(e.selection=r.placeholders.code)))}},{"../strings":75}],62:[function(e,t,n){"use strict";var r=e("../many"),o=e("../strings");t.exports=function(e){var t=0;if(e.selection=e.selection.replace(/\s+/g," ").replace(/(^\s+|\s+$)/g,""),!e.selection)return e.startTag="# ",e.selection=o.placeholders.heading,e.endTag="",void e.skip({before:1,after:1});e.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(e.startTag)&&(t=RegExp.lastMatch.length),e.startTag=e.endTag="",e.findTags(null,/\s?(-+|=+)/),/=+/.test(e.endTag)&&(t=1),/-+/.test(e.endTag)&&(t=2),e.startTag=e.endTag="",e.skip({before:1,after:1});var n=t>3?0:t+1;e.startTag=0===n?e.startTag.replace(/#+/,""):r("#",n)+" "}},{"../many":57,"../strings":75}],63:[function(e,t,n){"use strict";t.exports=function(e){e.startTag="----------\n",e.selection="",e.skip({left:2,right:1,any:!0})}},{}],64:[function(e,t,n){"use strict";var r=e("../once"),o=e("../strings"),i=e("../chunks/parseLinkInput"),a=/^[ ]{0,3}\[((?:attachment-)?\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,s=/^attachment-(\d+)$/i;function c(e,t){return a.lastIndex=0,e.replace(a,(function(e,n,r,o,i){if(t[n]=e.replace(/\s*$/,""),o)return t[n]=e.replace(/["(](.+?)[")]$/,""),o+i;return""}))}function l(e){var t=e.chunks,n=e.definition,r=e.attachment,o=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)((?:attachment-)?\d+)(\])/g,i=0,a={},l=[];t.before=c(t.before,a),t.selection=c(t.selection,a),t.after=c(t.after,a),t.before=t.before.replace(o,d),n?r||f(n):t.selection=t.selection.replace(o,d);var u=i;return t.after=t.after.replace(o,d),t.after&&(t.after=t.after.replace(/\n*$/,"")),t.after||(t.selection=t.selection.replace(/\n*$/,"")),i=0,Object.keys(a).forEach((function(e){s.test(e)&&f(a[e])})),r&&f(n),t.after+="\n\n"+l.join("\n"),u;function f(e){i++,e=e.replace(/^[ ]{0,3}\[(attachment-)?(\d+)\]:/,"  [$1"+i+"]:"),l.push(e)}function d(e,t,n,r,s,c){return n=n.replace(o,d),a[s]?(f(a[s]),t+n+r+i+c):e}}t.exports=function(e,t){var n,a=t.type,s="image"===a;if(e.trim(),e.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),e.endTag.length>1&&e.startTag.length>0)return e.startTag=e.startTag.replace(/!?\[/,""),e.endTag="",void l({chunks:e});e.selection=e.startTag+e.selection+e.endTag,e.startTag=e.endTag="",/\n\n/.test(e.selection)?l({chunks:e}):(n=this.async(),t.prompts.close(),(t.prompts[a]||t.prompts.link)(t,r((function(t){var r=t.definitions.map(i).filter((function(e){return e.href.length>0}));r.forEach((function(n,i){e.selection=(" "+e.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var c=(t.attachment?"  [attachment-9999]: ":" [9999]: ")+n.href+(n.title?' "'+n.title+'"':""),u=l({chunks:e,definition:c,attachment:t.attachment});t.attachment||function(){e.startTag=s?"![":"[",e.endTag="]["+u+"]",e.selection||(e.selection=o.placeholders[a]);i<r.length-1&&(e.before+=e.startTag+e.selection+e.endTag+"\n")}()})),n()}))))}},{"../chunks/parseLinkInput":39,"../once":68,"../strings":75}],65:[function(e,t,n){"use strict";var r=e("../many"),o=e("../strings"),i=e("./wrapping"),a=e("./settings"),s=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,c=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,l=/^\s*([*+-])/,u=/[^\n]\n\n[^\n]/;function f(e){return" "+e+" "}t.exports=function(e,t){var n,d="-",p=1,h=1,m=1;if(e.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!e.before||/\n$/.test(e.before)||/^\n/.test(e.startTag)||(e.before+=e.startTag,e.startTag=""),!e.startTag||(n=/\d+[.]/.test(e.startTag),e.startTag="",e.selection=e.selection.replace(/\n[ ]{4}/g,"\n"),i.unwrap(e),e.skip(),n&&(e.after=e.after.replace(c,y)),t!==n)){e.before=e.before.replace(s,(function(e){l.test(e)&&(d=RegExp.$1);return h=u.test(e)?1:0,y(e)})),e.selection||(e.selection=o.placeholders.listitem);var g=w(),v=r(" ",g.length);e.after=e.after.replace(c,(function(e){return m=u.test(e)?1:0,y(e)})),e.trim(!0),e.skip({before:h,after:m,any:!0}),e.startTag=g,i.wrap(e,a.lineLength-g.length),e.selection=e.selection.replace(/\n/g,"\n"+v)}function w(){return f(t?p+++".":d)}function y(e){return e.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,w)}}},{"../many":57,"../strings":75,"./settings":66,"./wrapping":67}],66:[function(e,t,n){"use strict";t.exports={lineLength:72}},{}],67:[function(e,t,n){"use strict";var r="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",o=new RegExp("^"+r,""),i=new RegExp("([^\\n])\\n(?!(\\n|"+r+"))","g"),a=/\s+$/;function s(e){i.lastIndex=0,e.selection=e.selection.replace(i,"$1 $2")}t.exports={wrap:function(e,t){var n=new RegExp("(.{1,"+t+"})( +|$\\n?)","gm");s(e),e.selection=e.selection.replace(n,(function(e,t){return o.test(e)?e:t+"\n"})).replace(a,"")},unwrap:s}},{}],68:[function(e,t,n){"use strict";t.exports=function(e){var t;return function(){if(!t)return t=!0,e.apply(this,arguments)}}},{}],69:[function(e,t,n){"use strict";var r=document;function o(e){return" "+e+" "}function i(e){var t,n=e.length;for(t=0;t<n;t++)e[t].parentElement.removeChild(e[t])}t.exports=function(){r.body.querySelectorAll?i(r.body.querySelectorAll(".wk-prompt")):i(function(e){var t,n=[],i=r.getElementsByTagName("*");for(t in i)-1!==o(i[t].className).indexOf(o(e))&&n.push(i[t]);return n}("wk-prompt"))}},{}],70:[function(e,t,n){"use strict";var r=e("crossvent"),o=e("bureaucracy"),i=e("./render"),a=e("../classes"),s=e("../strings"),c=e("../uploads"),l=document.documentElement;function u(e,t){Object.keys(e).forEach((function(n){t[n]&&(e[n].className+=" "+t[n])}))}t.exports=function(e,t){var n,f=0,d=s.prompts[e.type],p=i({id:"wk-prompt-"+e.type,title:d.title,description:d.description,placeholder:d.placeholder});r.add(p.cancel,"click",v),r.add(p.close,"click",v),r.add(p.ok,"click",g),r.add(p.input,"keypress",(function(e){13===(e.which||e.keyCode)&&(g(),e.preventDefault())})),r.add(p.dialog,"keydown",(function(e){27===(e.which||e.keyCode)&&(v(),e.preventDefault())})),u(p,e.classes.prompts),window.onscroll=function(){++f>10&&v()};var h=e.upload;"string"==typeof h&&(h={url:h});var m=null;function g(){v(),t({definitions:[p.input.value]})}function v(){h&&w(!0),p.dialog.parentElement&&p.dialog.parentElement.removeChild(p.dialog),e.surface.focus(e.mode)}function w(e){var t=e?"remove":"add";r[t](l,"dragenter",y),r[t](l,"dragend",b),r[t](l,"mouseout",b)}function y(){a.add(n.area,"wk-dragging"),a.add(n.area,"wk-prompt-upload-dragging")}function b(){a.rm(n.area,"wk-dragging"),a.rm(n.area,"wk-prompt-upload-dragging"),c.stop(e.surface.droparea)}function k(e){T(e),e.dataTransfer.dropEffect="copy"}function x(e){b(),T(e),m.submit(e.dataTransfer.files)}function T(e){e.stopPropagation(),e.preventDefault()}h&&(m=function(){n=i.uploads(p,s.prompts.types+(h.restriction||e.type+"s")),w(),r.add(n.area,"dragover",k,!1),r.add(n.area,"drop",x,!1),u(n,e.classes.prompts);var c=o.setup(n.fileinput,{method:h.method,formData:h.formData,fieldKey:h.fieldKey,xhrOptions:h.xhrOptions,endpoint:h.url,validate:h.validate||"image"});return c.on("started",(function(){a.rm(n.failed,"wk-prompt-error-show"),a.rm(n.warning,"wk-prompt-error-show")})),c.on("valid",(function(){a.add(n.area,"wk-prompt-uploading")})),c.on("invalid",(function(){a.add(n.warning,"wk-prompt-error-show")})),c.on("error",(function(){a.add(n.failed,"wk-prompt-error-show")})),c.on("success",(function(n){var r=n[0];p.input.value=r.href+' "'+r.title+'"',v(),t({definitions:n.map((function(e){return e.href+' "'+e.title+'"'})),attachment:"attachment"===e.type})})),c.on("ended",(function(){a.rm(n.area,"wk-prompt-uploading")})),c}(),e.autoUpload&&m.submit(e.autoUpload)),setTimeout((function(){p.input.focus()}),0)}},{"../classes":41,"../strings":75,"../uploads":76,"./render":71,bureaucracy:5,crossvent:10}],71:[function(e,t,n){(function(n){"use strict";var r=e("crossvent"),o=e("../getText"),i=e("../setText"),a=e("../classes"),s=e("../strings"),c="appendChild",l=n.document;function u(e,t,n){var r=l.createElement(e);return r.className=t,n&&i(r,n),r}function f(e){var t={dialog:u("article","wk-prompt "+e.id),close:u("a","wk-prompt-close"),header:u("header","wk-prompt-header"),h1:u("h1","wk-prompt-title",e.title),section:u("section","wk-prompt-body"),desc:u("p","wk-prompt-description",e.description),inputContainer:u("div","wk-prompt-input-container"),input:u("input","wk-prompt-input"),cancel:u("button","wk-prompt-cancel","Cancel"),ok:u("button","wk-prompt-ok","Ok"),footer:u("footer","wk-prompt-buttons")};return t.ok.type="button",t.header[c](t.h1),t.section[c](t.desc),t.section[c](t.inputContainer),t.inputContainer[c](t.input),t.input.placeholder=e.placeholder,t.cancel.type="button",t.footer[c](t.cancel),t.footer[c](t.ok),t.dialog[c](t.close),t.dialog[c](t.header),t.dialog[c](t.section),t.dialog[c](t.footer),l.body[c](t.dialog),t}f.uploads=function(e,t){var n="wk-prompt-fileupload",l={area:u("section","wk-prompt-upload-area"),warning:u("p","wk-prompt-error wk-warning",t),failed:u("p","wk-prompt-error wk-failed",s.prompts.uploadfailed),upload:u("label","wk-prompt-upload"),uploading:u("span","wk-prompt-progress",s.prompts.uploading),drop:u("span","wk-prompt-drop",s.prompts.drop),dropicon:u("p","wk-drop-icon wk-prompt-drop-icon"),browse:u("span","wk-prompt-browse",s.prompts.browse),dragdrop:u("p","wk-prompt-dragdrop",s.prompts.drophint),fileinput:u("input",n)};return l.area[c](l.drop),l.area[c](l.uploading),l.area[c](l.dropicon),l.upload[c](l.browse),l.upload[c](l.fileinput),l.fileinput.id=n,l.fileinput.type="file",l.fileinput.multiple="multiple",e.dialog.className+=" wk-prompt-uploads",e.inputContainer.className+=" wk-prompt-input-container-uploads",e.input.className+=" wk-prompt-input-uploads",e.section.insertBefore(l.warning,e.inputContainer),e.section.insertBefore(l.failed,e.inputContainer),e.section[c](l.upload),e.section[c](l.dragdrop),e.section[c](l.area),i(e.desc,o(e.desc)+s.prompts.upload),r.add(l.fileinput,"focus",(function(){a.add(l.upload,"wk-focused")})),r.add(l.fileinput,"blur",(function(){a.rm(l.upload,"wk-focused")})),l},t.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../classes":41,"../getText":46,"../setText":74,"../strings":75,crossvent:10}],72:[function(e,t,n){"use strict";var r=e("bullseye");t.exports=function(e){var t,n,o,i=Math.random().toString(18).substr(2).replace(/\d+/g,""),a="WoofmarkSelectionOpenMarker"+i,s="WoofmarkSelectionCloseMarker"+i,c=new RegExp(a+"|"+s,"g");return{markers:(t=e.reset().inputState.getChunks(),n=t.before.length,o=n+t.selection.length,[[n,a],[o,s]]),unmark:function(){var t=e.inputState,n=t.getChunks(),o=n.before+n.selection+n.after,i=o.lastIndexOf(a),l=o.lastIndexOf(s)+s.length,u=-1===i?0:i,f=-1===l?0:l;n.before=o.substr(0,u).replace(c,""),n.selection=o.substr(u,f-u).replace(c,""),n.after=o.substr(l).replace(c,"");var d=e.surface.current(e.inputMode),p=r(d,{caret:!0,autoupdateToCaret:!1,tracking:!1});t.setChunks(n),t.restore(!1),t.scrollTop=d.scrollTop=p.read().y-d.getBoundingClientRect().top-50,p.destroy()}}}},{bullseye:2}],73:[function(e,t,n){"use strict";var r=e("./setText"),o=e("./strings");t.exports={modes:function(e,t){r(e,o.modes[t]||t)},commands:function(e,t){r(e,o.buttons[t]||t)}}},{"./setText":74,"./strings":75}],74:[function(e,t,n){"use strict";t.exports=function(e,t){e.innerText=e.textContent=t}},{}],75:[function(e,t,n){"use strict";t.exports={placeholders:{bold:"strong text",italic:"emphasized text",quote:"quoted text",code:"code goes here",listitem:"list item",heading:"Heading Text",link:"link text",image:"image description",attachment:"attachment description"},titles:{bold:"Strong <strong> Ctrl+B",italic:"Emphasis <em> Ctrl+I",quote:"Blockquote <blockquote> Ctrl+J",code:"Code Sample <pre><code> Ctrl+E",ol:"Numbered List <ol> Ctrl+O",ul:"Bulleted List <ul> Ctrl+U",heading:"Heading <h1>, <h2>, ... Ctrl+D",link:"Hyperlink <a> Ctrl+K",image:"Image <img> Ctrl+G",attachment:"Attachment Ctrl+Shift+K",markdown:"Markdown Mode Ctrl+M",html:"HTML Mode Ctrl+H",wysiwyg:"Preview Mode Ctrl+P"},buttons:{bold:"B",italic:"I",quote:"â",code:"</>",ol:"1.",ul:"â¦¿",heading:"Tt",link:"Link",image:"Image",attachment:"Attachment",hr:"âµ"},prompts:{link:{title:"Insert Link",description:"Type or paste the url to your link",placeholder:'http://example.com/ "title"'},image:{title:"Insert Image",description:"Enter the url to your image",placeholder:'http://example.com/public/image.png "title"'},attachment:{title:"Attach File",description:"Enter the url to your attachment",placeholder:'http://example.com/public/report.pdf "title"'},types:"You can only upload ",browse:"Browse...",drophint:"You can also drag files from your computer and drop them here!",drop:"Drop your file here to begin upload...",upload:", or upload a file",uploading:"Uploading your file...",uploadfailed:"The upload failed! That's all we know."},modes:{wysiwyg:"wysiwyg",markdown:"mâ"}}},{}],76:[function(e,t,n){"use strict";var r=e("crossvent"),o=e("./classes"),i=document.documentElement,a=0;function s(e,t,n,s,f){var d=f?"remove":"add";function p(){0===--a&&u(t)}function h(){u(t)}r[d](i,"dragend",h),r[d](i,"mouseout",h),r[d](e,"dragover",(function(e){l(e),o.add(t,"wk-dragging"),o.add(t,"wk-container-dragging"),e.dataTransfer.dropEffect="copy"}),!1),r[d](e,"dragenter",(function(){a++,o.add(t,"wk-dragging"),o.add(t,"wk-container-dragging")}),!1),r[d](e,"dragleave",p,!1),r[d](t,"drop",(function(e){p(),l(e),n.runCommand((function(t,r){var o=Array.prototype.slice.call(e.dataTransfer.files),i=function(e){if(s.images&&!s.attachments)return"image";if(!s.images&&s.attachments)return"attachment";if(e.every((t=s.images.validate||c,function(e){return t(e)})))return"image";var t;return"attachment"}(o);n.linkOrImageOrAttachment(i,o).call(this,r,t)}))}),!1)}function c(){return!1}function l(e){e.stopPropagation(),e.preventDefault()}function u(e){o.rm(e,"wk-dragging"),o.rm(e,"wk-container-dragging")}s.stop=u,t.exports=s},{"./classes":41,crossvent:10}],77:[function(e,t,n){(function(n){"use strict";var r=e("local-storage"),o=e("crossvent"),i=e("kanye"),a=e("./uploads"),s=e("./strings"),c=e("./setText"),l=e("./rememberSelection"),u=e("./bindCommands"),f=e("./InputHistory"),d=e("./getCommandHandler"),p=e("./getSurface"),h=e("./classes"),m=e("./renderers"),g=e("./prompts/prompt"),v=e("./prompts/close"),w=["markdown","html","wysiwyg"],y=[],b=/\bMac OS\b/.test(n.navigator.userAgent),k=document,x=/^<p><\/p>\n?$/i;function T(e){for(var t=0;t<y.length;t++)if(y[t]&&y[t].ta===e)return y[t].editor;return null}function E(e,t){var n=T(e);if(n)return n;var c=e.parentElement;if(c.children.length>1)throw new Error("woofmark demands <textarea> elements to have no siblings");var E=t||{};if(void 0===E.markdown&&(E.markdown=!0),void 0===E.html&&(E.html=!0),void 0===E.wysiwyg&&(E.wysiwyg=!0),!E.markdown&&!E.html&&!E.wysiwyg)throw new Error("woofmark expects at least one input mode to be available");void 0===E.hr&&(E.hr=!1),void 0===E.storage&&(E.storage=!0),!0===E.storage&&(E.storage="woofmark_input_mode"),void 0===E.fencing&&(E.fencing=!0),void 0===E.render&&(E.render={}),void 0===E.render.modes&&(E.render.modes={}),void 0===E.render.commands&&(E.render.commands={}),void 0===E.prompts&&(E.prompts={}),void 0===E.prompts.link&&(E.prompts.link=g),void 0===E.prompts.image&&(E.prompts.image=g),void 0===E.prompts.attachment&&(E.prompts.attachment=g),void 0===E.prompts.close&&(E.prompts.close=v),void 0===E.classes&&(E.classes={}),void 0===E.classes.wysiwyg&&(E.classes.wysiwyg=[]),void 0===E.classes.prompts&&(E.classes.prompts={}),void 0===E.classes.input&&(E.classes.input={});var R=E.storage&&r.get(E.storage);R&&(E.defaultMode=R);var O,M=C({c:"wk-container-drop"}),I=C({c:"wk-switchboard"}),$=C({c:"wk-commands"}),A=C({c:["wk-wysiwyg","wk-hide"].concat(E.classes.wysiwyg).join(" ")}),L=p(e,A,M),N=new f(L,"markdown"),_={addCommand:J,addCommandButton:function(e,t,n){2===arguments.length&&(n=t,t=null);var r=C({t:"button",c:"wk-command",p:$}),i=E.render.commands,a="function"==typeof i?i:m.commands,c=s.titles[e];c&&r.setAttribute("title",b?S(c):c);r.type="button",r.tabIndex=-1,a(r,e),o.add(r,"click",d(L,N,n)),t&&J(t,n);return r},runCommand:function(e){d(L,N,(function(t,n,r){return e.call(this,r,n)}))(null)},parseMarkdown:E.parseMarkdown,parseHTML:E.parseHTML,destroy:function(){"markdown"!==_.mode&&(e.value=F());h.rm(e,"wk-hide"),X(!0),delete y[q-1]},value:function(t){var n=String(t),r=1===arguments.length;r&&("wysiwyg"===_.mode?A.innerHTML=o():e.value="html"===_.mode?o():n,N.reset());return F();function o(){return E.parseMarkdown(n)}},textarea:e,editable:E.wysiwyg?A:null,setMode:z,history:{undo:N.undo,redo:N.redo,canUndo:N.canUndo,canRedo:N.canRedo},mode:"markdown"},H={ta:e,editor:_},q=y.push(H),D="woofmark_"+q,j={filter:c,context:D},P={markdown:{button:C({t:"button",c:"wk-mode wk-mode-active"}),set:B},html:{button:C({t:"button",c:"wk-mode wk-mode-inactive"}),set:U},wysiwyg:{button:C({t:"button",c:"wk-mode wk-mode-inactive"}),set:K}};return C({t:"span",c:"wk-drop-text",x:s.prompts.drop,p:M}),C({t:"p",c:["wk-drop-icon"].concat(E.classes.dropicon).join(" "),p:M}),A.contentEditable=!0,P.markdown.button.setAttribute("disabled","disabled"),w.forEach((function(e){var t=P[e].button,n=E.render.modes;if(E[e]){I.appendChild(t),("function"==typeof n?n:m.modes)(t,e),o.add(t,"click",P[e].set),t.type="button",t.tabIndex=-1;var r=s.titles[e];r&&t.setAttribute("title",b?S(r):r)}})),E.wysiwyg&&(O=C({c:"wk-wysiwyg-placeholder wk-hide",x:e.placeholder}),o.add(O,"click",W)),E.defaultMode&&E[E.defaultMode]?P[E.defaultMode].set():E.markdown?P.markdown.set():E.html?P.html.set():P.wysiwyg.set(),u(L,E,_),X(),_;function X(e){var t=e?"rm":"add",n=e?"removeChild":"appendChild";e?i.clear(D):(E.markdown&&i.on("cmd+m",j,B),E.html&&i.on("cmd+h",j,U),E.wysiwyg&&i.on("cmd+p",j,K)),h[t](c,"wk-container"),c[n](A),O&&c[n](O),c[n]($),c[n](I),(E.images||E.attachments)&&(c[n](M),a(c,M,_,E,e))}function B(e){z("markdown",e)}function U(e){z("html",e)}function K(e){z("wysiwyg",e)}function z(t,n){var i,a=_.mode,s=P[a].button,c=P[t].button,u=!!n||k.activeElement===e||k.activeElement===A;if(function(e){e&&(e.preventDefault(),e.stopPropagation())}(n),a!==t){if(i=u&&l(N,E),e.blur(),"markdown"===t)if("html"===a)e.value=d("parseHTML",e.value).trim();else{e.value=d("parseHTML",A).trim();const t=/\*\*[A-Z][^*]+ \*\*/gi,n=/_[A-Z][^_]+ _/gi;if(e.value.match(t)){const n=e.value.match(t),r=/\*\*[A-Z][^*]+ \*\*/i;for(let t=0;t<=n.length-1;t++)e.value.match(r)&&(n[t]=n[t].replace(" **","** "),e.value=e.value.replace(r,n[t]))}if(e.value.match(n)){const t=e.value.match(n),r=/_[A-Z][^_]+ _/i;for(let n=0;n<=t.length-1;n++)e.value.match(r)&&(t[n]=t[n].replace(" _","_ "),e.value=e.value.replace(r,t[n]))}}else"html"===t?e.value="markdown"===a?d("parseMarkdown",e.value).trim():A.innerHTML.trim():"wysiwyg"===t&&(A.innerHTML="markdown"===a?d("parseMarkdown",e.value).replace(x,"").trim():e.value.replace(x,"").trim());var f;"wysiwyg"===t?(h.add(e,"wk-hide"),h.rm(A,"wk-hide"),O&&h.rm(O,"wk-hide"),u&&setTimeout(W,0)):(h.rm(e,"wk-hide"),h.add(A,"wk-hide"),O&&h.add(O,"wk-hide"),u&&e.focus()),h.add(c,"wk-mode-active"),h.rm(s,"wk-mode-active"),h.add(s,"wk-mode-inactive"),h.rm(c,"wk-mode-inactive"),c.setAttribute("disabled","disabled"),s.removeAttribute("disabled"),_.mode=t,E.storage&&r.set(E.storage,t),N.setInputMode(t),i&&i.unmark(),f="woofmark-mode-change",setTimeout((function(){o.fabricate(e,f)}),0)}function d(e,t){return E[e](t,{markers:i&&i.markers||[]})}}function W(){A.focus()}function F(){return"wysiwyg"===_.mode?E.parseHTML(A):"html"===_.mode?E.parseHTML(e.value):e.value}function J(e,t){i.on(e,j,d(L,N,t))}}function C(e){var t=e||{},n=k.createElement(t.t||"div");return n.className=t.c||"",c(n,t.x||""),t.p&&t.p.appendChild(n),n}function S(e){return e.replace(/\bctrl\b/i,"â").replace(/\balt\b/i,"â¥").replace(/\bshift\b/i,"â§")}E.find=T,E.strings=s,t.exports=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./InputHistory":35,"./bindCommands":37,"./classes":41,"./getCommandHandler":44,"./getSurface":45,"./prompts/close":69,"./prompts/prompt":70,"./rememberSelection":72,"./renderers":73,"./setText":74,"./strings":75,"./uploads":76,crossvent:10,kanye:15,"local-storage":16}]},{},[77])(77)}));